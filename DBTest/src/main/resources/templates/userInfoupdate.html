
<html>
<head>
<meta charset="utf-8" />
<title>社員情報更新</title>
</head>
<body>
	<form th:action="@{/logout}" method="post">
		こんにちは！<span sec:authentication="principal.username"></span>さん
	    <button type="submit">ログアウト</button><br>
	</form>
	<form th:action="@{/UserInfoUpdate}" enctype="multipart/form-data" th:object="${userInfoUpdateFormDetail}" method="POST">
		<p>
			<input type = "submit" name = "back" value = "戻る"></input>
			<span th:text="${userInfoUpdateFormDetail.message}"></span>
		</p>
		<input type="hidden" th:name="id" th:value="${userInfoUpdateFormDetail.id}">
		<table>
			<tr>
				<td>
					<table border="1" style="width: 500px;">
						<tr>
							<th style="width: 30%;">フリガナ</th>
							<td style="width: 70%;"><input type="text" name="nameReading" th:value="*{nameReading}" style="width: 100%;"></input></td>
						</tr>
					</table>
				</td>
				<td>
				<!-- フリガナ -->
				</td>
			</tr>
			<tr>
				<td>
					<table border="1" style="width: 500px;">
						<tr>
							<th style="width: 30%;">氏名</th>
							<td style="width: 70%;"><input type="text" name="name" th:value="*{name}" style="width: 100%;"></input></td>
						</tr>
						<tr>
					</table>
				</td>
				<td>
					<p th:if="${#fields.hasErrors('*{name}')}" th:errors="*{name}"></p>
				</td>
			</tr>
			<tr>
				<td>
					<table border="1" style="width: 500px;">
						<tr>
							<th style="width: 30%;">メールアドレス</th>
							<td style="width: 70%;"><input type="text" name="mailAddress" th:value="*{mailAddress}" style="width: 100%;"></input></td>
						</tr>
					</table>
				</td>
				<td>
					<!-- メールアドレス -->
				</td>
			</tr>
			<tr>
				<td>
					<table border="1" style="width: 500px;">
						<tr>
							<th style="width: 30%;">パスワード</th>
							<td style="width: 70%;"><input type="text" name="password" th:value="*{password}" style="width: 100%;"></input></td>
						</tr>
					</table>
				</td>
				<td>
					<p th:if="${#fields.hasErrors('*{password}')}" th:errors="*{password}"></p>
				</td>
			</tr>
			<tr>
				<td>
					<table border="1" style="width: 500px;">
						<tr>
							<th style="width: 30%;">役職</th>
							<td style="width: 70%;">
								<select name="position" style="width: 100%;">
									<option value="">---</option>
									<option th:each="data : *{selectPosition}" th:value="${data}" th:text="${data}" th:selected="${data}==*{position}"></option>
								</select>
								<input type="hidden" name="selectPosition" th:value="*{selectPosition}"></input>
							</td>
						</tr>
					</table>
				</td>
				<td>
					<p th:if="${#fields.hasErrors('*{position}')}" th:errors="*{position}"></p>
				</td>
			</tr>
			<tr>
				<td>
					<table border="1" style="width: 500px;">
						<tr>
							<th style="width: 30%;">基本給</th>
							<td style="width: 70%;"><input type="text" name="basicSalaryStr" th:value="*{basicSalaryStr}" style="width: 100%;"></input></td>
						</tr>
					</table>
				</td>
				<td>
					<p th:if="${#fields.hasErrors('*{basicSalaryStr}')}" th:errors="*{basicSalaryStr}"></p>
				</td>
			</tr>
			<tr>
				<td>
					<table border="1" style="width: 500px;">
						<tr>
							<th style="width: 30%;">
								<div>
									<p>画像</p>
									<p th:unless="*{imageName}"  align="center">
										<input type="submit" name="imageUpload" value="アップロード"></input>
									</p>
									<p  th:if="*{imageName}"  align="center">
										<input type="submit" name="imageDelete" value="取り消し"></input>
									</p>
								</div>
							</th>
							<td style="width: 70%;"  align="center">
								<p th:unless="*{imageName}">
									<input type="file" name="image" th:value="*{image}" style="width: 100%;"></input>
								</p>
								<div th:if="*{imageName}"  align="center">
									<p th:text="*{imageName}"></p>
									<img th:src="*{imageOutput}" width="200" height="200">
									<input type="hidden" name="imageName" th:value="*{imageName}"></input>

									<input type="hidden" name="imageOutput" th:value="*{imageOutput}"></input>
								</div>
							</td>
						</tr>
					</table>
				</td>
				<td>
					<p th:text="*{imageErrMessage}"></p>
				</td>
			</tr>
		</table>

		<br>
		<input type="submit" name="submit" value="更新"></input>
	</form>

</body>
</html>